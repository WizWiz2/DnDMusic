<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>RPG Auto-DJ</title>
    <link rel="stylesheet" href="/static/css/ui.css" />

  </head>
  <body>
    <header>
      <div class="wrap">
        <h1>ü™Ñ RPG Auto-DJ</h1>
        <nav>
          <a href="/docs" target="_blank" rel="noopener">API docs</a>
          <a href="https://github.com/" target="_blank" rel="noopener">GitHub</a>
        </nav>
      </div>
    </header>

    <main>
      <section class="card">
        <h2>–ñ–∞–Ω—Ä –∏ —Å—Ü–µ–Ω—ã</h2>
        <div class="form-grid">
          <div>
            <label for="genre-select">–ñ–∞–Ω—Ä –∫–∞–º–ø–∞–Ω–∏–∏</label>
            <select id="genre-select"></select>
          </div>
          <div>
            <label for="scene-select">–°—Ü–µ–Ω–∞</label>
            <select id="scene-select"></select>
          </div>
          <div class="form-actions">
            <button id="search-button" type="button">–ü–æ–¥–æ–±—Ä–∞—Ç—å –º—É–∑—ã–∫—É</button>
            <span class="status" id="search-status">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ü–µ–Ω—É, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø–ª–µ–π–ª–∏—Å—Ç—ã.</span>
          </div>
        </div>

        <h2>–ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä —Å—Ü–µ–Ω—ã</h2>
        <div class="scene-list" id="scene-buttons"></div>
      </section>

      <section class="card">
        <div class="result-card">
          <p class="status" id="result-status">–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –ø–æ–¥–±–æ—Ä–∫–∞ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ –¥–ª—è –≤–∞—à–µ–π —Å—Ü–µ–Ω—ã.</p>
          <div id="result-container" class="hidden">
            <div class="result-header">
              <h2 id="result-title">–¢–µ–∫—É—â–∞—è —Å—Ü–µ–Ω–∞</h2>
              <span class="pill" id="result-genre"></span>
              <span class="pill" id="result-scene"></span>
              <span class="pill hidden" id="result-confidence"></span>
            </div>
            <div class="result-body">
              <div class="info-block result-main">
                <h3>–ü–ª–µ–µ—Ä</h3>
                <div id="player" style="width:100%;aspect-ratio:16/9;background:rgba(0,0,0,0.06);border-radius:12px;overflow:hidden"></div>
                <div class="form-actions" style="margin-top:10px">
                  <button id="player-play" type="button" class="secondary">‚ñ∂Ô∏è Play</button>
                  <button id="player-pause" type="button" class="secondary">‚è∏ Pause</button>
                  <label style="margin-left:8px">–ì—Ä–æ–º–∫–æ—Å—Ç—å <input id="player-volume" type="range" min="0" max="100" value="70" style="vertical-align:middle"/></label>
                </div>
                <div class="form-actions" style="margin-top:6px">
                  <label>–ü—Ä–æ–≤–∞–π–¥–µ—Ä
                    <select id="provider-select" style="margin-left:8px"></select>
                  </label>
                  <button id="provider-open" type="button" class="secondary">üîó –û—Ç–∫—Ä—ã—Ç—å</button>
                </div>
                <p class="status" id="player-status">–°–æ–≤–µ—Ç: –Ω–∞–∂–º–∏—Ç–µ Play –æ–¥–∏–Ω —Ä–∞–∑, —á—Ç–æ–±—ã —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∞–≤—Ç–æ–ø–ª–µ–∏.</p>
                <div class="player-log-controls">
                  <span class="player-log-title">–ñ—É—Ä–Ω–∞–ª –ø–ª–µ–µ—Ä–∞</span>
                  <button id="player-log-clear" type="button" class="secondary small">–û—á–∏—Å—Ç–∏—Ç—å</button>
                </div>
                <div id="player-log" class="player-log" aria-live="polite"></div>
              </div>
              <div class="info-block result-main">
                <h3>–ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å</h3>
                <p id="result-query" class="status"></p>
              </div>
              <div class="info-block result-main">
                <h3>–ü–ª–µ–π–ª–∏—Å—Ç—ã</h3>
                <ul class="playlist-list" id="playlist-list"></ul>
              </div>
              <div class="info-block result-main">
                <h3>–ê–Ω—Ç–∏–¥—Ä–µ–±–µ–∑–≥</h3>
                <ul class="info-list" id="hysteresis-list"></ul>
              </div>
              <div class="info-block result-details">
                <h3>–î–µ—Ç–∞–ª–∏ —Å—Ü–µ–Ω—ã</h3>
                <ul class="info-list" id="scene-config"></ul>
                <div id="result-tags" class="status hidden"></div>
                <div id="result-reason" class="status hidden"></div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="card">
        <h2>–ê–≤—Ç–æ–ø–æ–¥–±–æ—Ä –ø–æ —Ç–µ–≥–∞–º</h2>
        <div class="form-grid">
          <div>
            <label for="recommend-genre">–ñ–∞–Ω—Ä</label>
            <select id="recommend-genre"></select>
          </div>
          <div>
            <label for="recommend-tags">–¢–µ–≥–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)</label>
            <input id="recommend-tags" type="text" placeholder="battle, dragons" />
          </div>
          <div class="form-actions">
            <button id="recommend-button" type="button">–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞—Ç—å —Å—Ü–µ–Ω—É</button>
            <span class="status" id="recommend-status">–û–ø–∏—à–∏—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é ‚Äî —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç —Å—Ü–µ–Ω—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.</span>
          </div>
          <div class="form-actions">
            <button id="mic-toggle" type="button" class="secondary">üéô –í–∫–ª—é—á–∏—Ç—å –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ</button>
            <span class="status" id="mic-status">–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ –≤—ã–∫–ª—é—á–µ–Ω–æ.</span>
          </div>
          <div class="form-actions">
            <button id="whisper-toggle" type="button" class="secondary">üß† –í–∫–ª—é—á–∏—Ç—å Whisper (—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç)</button>
            <span class="status" id="whisper-status">Whisper –≤—ã–∫–ª—é—á–µ–Ω.</span>
          </div>
        </div>
      </section>
    </main>

    <footer>
      –ú–∞–∫–µ—Ç –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ –∂–∞–Ω—Ä: —Ñ—ç–Ω—Ç–µ–∑–∏ ‚Äî –∑–µ–ª—ë–Ω—ã–µ –æ—Ç—Ç–µ–Ω–∫–∏, –∫–∏–±–µ—Ä–ø–∞–Ω–∫ ‚Äî –Ω–µ–æ–Ω–æ–≤—ã–µ, sci-fi ‚Äî —Ö–æ–ª–æ–¥–Ω—ã–µ, —Ö–æ—Ä—Ä–æ—Ä ‚Äî —Ç—ë–º–Ω–æ-–∫—Ä–∞—Å–Ω—ã–µ.
    </footer>

    <script id="initial-data" type="application/json">{{ initial_data | tojson | safe }}</script>
    
    <script type="module" src="/static/js/app.js"></script>
  </body>
</html>
